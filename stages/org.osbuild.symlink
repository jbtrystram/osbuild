#!/usr/bin/python3
import os
import sys

import osbuild.api
from osbuild.util import parsing


def main(args, options):
    items = options["paths"]

    for path in items:
        src = path["source"]
        link = parsing.parse_location(path["link"], args)

        print(f"linking '{link}' -> '{src}'")
        os.symlink(src, link)

    return 0


if __name__ == '__main__':
    _args = osbuild.api.arguments()
    r = main(_args, _args["options"])
    sys.exit(r)
